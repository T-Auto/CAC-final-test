我们已知：

- 函数 $ f(x) $ 定义在 $ \mathbb{R} $ 上；
- 定义 $ g(x) = (x - 1)f(x) $，且 $ g(x) $ 是 **奇函数**；
- 定义 $ h(x) = f(x) + x $，且 $ h(x) $ 是 **偶函数**。

目标：求 $ f(x) $ 的**最大值**。

---

### 第一步：利用奇偶性条件列出等式

#### 1. $ g(x) $ 是奇函数：

$$
g(-x) = -g(x)
$$

代入定义：

$$
(-x - 1)f(-x) = -[(x - 1)f(x)]
$$

即：

$$
(-x - 1)f(-x) = -(x - 1)f(x) \tag{1}
$$

#### 2. $ h(x) $ 是偶函数：

$$
h(-x) = h(x)
$$

即：

$$
f(-x) + (-x) = f(x) + x
\Rightarrow f(-x) - x = f(x) + x
\Rightarrow f(-x) = f(x) + 2x \tag{2}
$$

---

### 第二步：将 (2) 代入 (1)

从 (2) 得到 $ f(-x) = f(x) + 2x $，代入 (1) 左边：

左边：$ (-x - 1)f(-x) = (-x - 1)(f(x) + 2x) $

右边：$ -(x - 1)f(x) $

所以：

$$
(-x - 1)(f(x) + 2x) = -(x - 1)f(x)
$$

展开左边：

$$
(-x - 1)f(x) + (-x - 1)(2x) = -(x - 1)f(x)
$$

计算第二项：

$$
(-x - 1)(2x) = -2x(x + 1) = -2x^2 - 2x
$$

所以左边为：

$$
(-x - 1)f(x) - 2x^2 - 2x
$$

等式变为：

$$
(-x - 1)f(x) - 2x^2 - 2x = -(x - 1)f(x)
$$

将右边移到左边：

$$
[(-x - 1)f(x) + (x - 1)f(x)] - 2x^2 - 2x = 0
$$

合并 $ f(x) $ 项：

$$
[(-x - 1 + x - 1)f(x)] - 2x^2 - 2x = 0
\Rightarrow (-2)f(x) - 2x^2 - 2x = 0
$$

即：

$$
-2f(x) - 2x^2 - 2x = 0
\Rightarrow f(x) = -x^2 - x \tag{3}
$$

---

### 第三步：验证是否满足原始条件

我们得到 $ f(x) = -x^2 - x $

验证：

- $ h(x) = f(x) + x = -x^2 - x + x = -x^2 $，显然是偶函数 ✅
- $ g(x) = (x - 1)f(x) = (x - 1)(-x^2 - x) = -(x - 1)(x^2 + x) $

计算 $ g(-x) $：

$$
g(-x) = (-x - 1)f(-x)
$$

先算 $ f(-x) = -(-x)^2 - (-x) = -x^2 + x $

所以：

$$
g(-x) = (-x - 1)(-x^2 + x) = -(x + 1)(-x^2 + x) = (x + 1)(x^2 - x)
$$

而 $ -g(x) = -[-(x - 1)(x^2 + x)] = (x - 1)(x^2 + x) $

现在看是否相等：

计算 $ (x + 1)(x^2 - x) = (x + 1)x(x - 1) = x(x + 1)(x - 1) $

计算 $ (x - 1)(x^2 + x) = (x - 1)x(x + 1) = x(x + 1)(x - 1) $

两者相等，所以 $ g(-x) = -g(x) $ ✅

因此，$ f(x) = -x^2 - x $ 满足所有条件。

---

### 第四步：求 $ f(x) $ 的最大值

$$
f(x) = -x^2 - x = -(x^2 + x)
$$

这是一个开口向下的抛物线，最大值出现在顶点。

配方：

$$
f(x) = -\left(x^2 + x + \frac{1}{4}\right) + \frac{1}{4} = -\left(x + \frac{1}{2}\right)^2 + \frac{1}{4}
$$

所以最大值为：

$$
\boxed{\frac{1}{4}}
$$

---

### 最终答案：

$$
\boxed{\frac{1}{4}}
$$