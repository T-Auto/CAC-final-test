<thinking>
用户现在需要解决的问题是已知f(x)的定义域是R，g(x)=(x-1)f(x)是奇函数，h(x)=f(x)+x是偶函数，求f(x)的最大值。首先，我应该回忆奇函数和偶函数的性质，奇函数满足g(-x)=-g(x)，偶函数满足h(-x)=h(x)。接下来，把这两个条件列出来，然后联立方程组，解出f(x)的表达式，最后求最大值对吧？

首先，先写奇函数的条件：g(-x)=-g(x)。因为g(x)=(x-1)f(x)，所以g(-x)=(-x -1)f(-x)=-(x+1)f(-x)，而-g(x)=-(x-1)f(x)。所以等式就是-(x+1)f(-x) = -(x-1)f(x)，两边负号约掉，得到(x+1)f(-x) = (x-1)f(x)，这个是第一个方程，记为式（1）。

然后偶函数的条件：h(-x)=h(x)。h(x)=f(x)+x，所以h(-x)=f(-x) + (-x)=f(-x)-x，h(x)=f(x)+x，所以等式是f(-x)-x = f(x)+x，整理一下得到f(-x) = f(x) + 2x，这个是第二个方程，记为式（2）。

接下来把式（2）代入式（1），把f(-x)替换成f(x)+2x。式（1）是(x+1)f(-x) = (x-1)f(x)，代入后左边是(x+1)[f(x)+2x]，右边是(x-1)f(x)。现在展开左边：(x+1)f(x) + 2x(x+1)，右边是(x-1)f(x)。把含f(x)的项移到一边，常数项移到另一边。左边减右边：[ (x+1)f(x) - (x-1)f(x) ] + 2x(x+1) = 0。计算(x+1)-(x-1)=2，所以左边变成2f(x) + 2x(x+1) = 0。两边除以2，得到f(x) + x(x+1) = 0，所以f(x) = -x² -x。哦，这样f(x)的表达式就求出来了？等一下，让我再检查一遍计算有没有错。

刚才代入的过程：式（2）是f(-x)=f(x)+2x，没错。式（1）是(x+1)f(-x)=(x-1)f(x)，代入后左边是(x+1)(f(x)+2x)，展开是(x+1)f(x) + 2x(x+1)，右边是(x-1)f(x)。移项得左边减右边等于0，即[(x+1)-(x-1)]f(x) + 2x(x+1)=0，计算系数，(x+1)-(x-1)=2，没错，所以2f(x)+2x²+2x=0，除以2得f(x)+x²+x=0，所以f(x)=-x²-x。对的，这个表达式是对的。

接下来求f(x)=-x²-x的最大值，这是一个二次函数，开口向下，顶点就是最大值点。二次函数的一般形式是ax²+bx+c，这里a=-1，b=-1，c=0。顶点的x坐标是-b/(2a)= -(-1)/(2*(-1))=1/(-2)=-1/2。代入x=-1/2，得到f(-1/2)= -(-1/2)² - (-1/2)= -1/4 + 1/2=1/4。或者也可以配方，f(x)=-x²-x=-(x²+x)=-(x²+x + 1/4 -1/4)=-( (x+1/2)² -1/4 )= - (x+1/2)² + 1/4，这样更清楚，最大值就是1/4，当x=-1/2时取得。

现在再验证一下是否满足原来的条件，比如g(x)是不是奇函数，h(x)是不是偶函数。首先算g(x)=(x-1)f(x)=(x-1)(-x²-x)= -x(x-1)(x+1)= -x(x²-1)= -x³ +x。然后g(-x)= -(-x)³ + (-x)= -(-x³) -x= x³ -x，而-g(x)= -(-x³ +x)=x³ -x，确实g(-x)=-g(x)，是奇函数，正确。然后h(x)=f(x)+x= -x² -x +x= -x²，h(-x)= -(-x)²=-x²，所以h(-x)=h(x)，是偶函数，正确。所以没问题。

所以f(x)的最大值是1/4，对吗？再检查计算：f(-1/2)= -(-1/2)^2 - (-1/2)= -1/4 + 2/4=1/4，没错。配方后的结果也是对的，最大值是1/4。
</thinking>

要解决这个问题，我们需要**利用奇函数和偶函数的定义**，建立关于 \( f(x) \) 的方程组，解出 \( f(x) \) 的表达式后求最大值。


### **步骤1：利用奇函数和偶函数的性质建立方程**
已知：  
- \( g(x) = (x-1)f(x) \) 是**奇函数**，满足 \( g(-x) = -g(x) \)；  
- \( h(x) = f(x) + x \) 是**偶函数**，满足 \( h(-x) = h(x) \)。  


#### **（1）奇函数条件：\( g(-x) = -g(x) \)**  
计算 \( g(-x) \) 和 \( -g(x) \)：  
- \( g(-x) = (-x - 1)f(-x) = -(x+1)f(-x) \)；  
- \( -g(x) = -(x-1)f(x) \)。  

因此，\( -(x+1)f(-x) = -(x-1)f(x) \)，约去负号得：  
\[ (x+1)f(-x) = (x-1)f(x) \quad \text{（式1）} \]  


#### **（2）偶函数条件：\( h(-x) = h(x) \)**  
计算 \( h(-x) \) 和 \( h(x) \)：  
- \( h(-x) = f(-x) + (-x) = f(-x) - x \)；  
- \( h(x) = f(x) + x \)。  

因此，\( f(-x) - x = f(x) + x \)，整理得：  
\[ f(-x) = f(x) + 2x \quad \text{（式2）} \]  


### **步骤2：联立方程组求解 \( f(x) \)**  
将式2代入式1，消去 \( f(-x) \)：  
\[ (x+1)\left[f(x) + 2x\right] = (x-1)f(x) \]  

展开并整理：  
\[ (x+1)f(x) + 2x(x+1) = (x-1)f(x) \]  
\[ \left[(x+1)-(x-1)\right]f(x) + 2x(x+1) = 0 \]  
\[ 2f(x) + 2x^2 + 2x = 0 \]  
两边除以2得：  
\[ f(x) = -x^2 - x \]  


### **步骤3：求 \( f(x) \) 的最大值**  
\( f(x) = -x^2 - x \) 是**开口向下的二次函数**，最大值出现在**顶点**处。  

二次函数的顶点公式为 \( x = -\frac{b}{2a} \)，其中 \( a = -1 \)，\( b = -1 \)：  
\[ x = -\frac{-1}{2 \times (-1)} = -\frac{1}{2} \]  

代入 \( x = -\frac{1}{2} \) 计算最大值：  
\[ f\left(-\frac{1}{2}\right) = -\left(-\frac{1}{2}\right)^2 - \left(-\frac{1}{2}\right) = -\frac{1}{4} + \frac{1}{2} = \frac{1}{4} \]  


### **验证正确性**  
- \( g(x) = (x-1)f(x) = -(x-1)(x^2 + x) = -x(x^2 - 1) = -x^3 + x \)，满足 \( g(-x) = x^3 - x = -g(x) \)（奇函数）；  
- \( h(x) = f(x) + x = -x^2 \)，满足 \( h(-x) = -x^2 = h(x) \)（偶函数）。  


### **最终结果**  
\( f(x) \) 的最大值为 \( \boldsymbol{\dfrac{1}{4}} \)。