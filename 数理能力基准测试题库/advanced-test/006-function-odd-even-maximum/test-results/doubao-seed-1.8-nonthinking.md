### 步骤1：利用奇偶函数性质列方程
已知$g(x)=(x-1)f(x)$是奇函数，根据奇函数定义$g(-x)=-g(x)$，可得：
$$(-x -1)f(-x) = -(x -1)f(x)$$
整理得：
$$-(x+1)f(-x) = -(x-1)f(x) \implies (x+1)f(-x)=(x-1)f(x) \tag{1}$$

又因为$h(x)=f(x)+x$是偶函数，根据偶函数定义$h(-x)=h(x)$，可得：
$$f(-x) -x = f(x)+x \implies f(-x)=f(x)+2x \tag{2}$$

### 步骤2：联立方程求解$f(x)$
将式(2)代入式(1)：
$$(x+1)\left[f(x)+2x\right]=(x-1)f(x)$$
展开左边：
$$(x+1)f(x)+2x(x+1)=(x-1)f(x)$$
移项合并同类项：
$$(x+1)f(x)-(x-1)f(x) = -2x(x+1)$$
$$2f(x) = -2x^2-2x$$
解得：
$$f(x)=-x^2 -x$$

### 步骤3：求$f(x)$的最大值
$f(x)=-x^2 -x$是开口向下的二次函数，其对称轴为：
$$x=-\frac{b}{2a}=-\frac{-1}{2\times(-1)}=-\frac{1}{2}$$
将$x=-\frac{1}{2}$代入$f(x)$：
$$f\left(-\frac{1}{2}\right)=-\left(-\frac{1}{2}\right)^2-\left(-\frac{1}{2}\right)=-\frac{1}{4}+\frac{1}{2}=\frac{1}{4}$$

### 最终答案
$\boldsymbol{\frac{1}{4}}$