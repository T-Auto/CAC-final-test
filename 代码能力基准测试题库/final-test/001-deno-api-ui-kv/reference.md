# 考察能力

| 能力点         | 要求                            | 观察方式                                     |
| -------------- | ------------------------------- | -------------------------------------------- |
| Deno KV 使用   | 关键数据持久化，写入走 atomic() | KV 中能看到 keys/config；并发下无错          |
| 并发与限流     | 队列 + 定时出队，避免竞态       | 压测时无重复/丢单；速率受 RATE_LIMIT_MS 控制 |
| 代理与转发     | CORS/OPTIONS 完整；流式转发可用 | curl/浏览器均能拿到完整响应流                |
| 密钥轮转与统计 | 轮询均衡；失败标记；统计可见    | UI 上能测试 key；请求数累加正确              |
| UI/后端一体    | 单文件内联 UI，操作即生效       | 修改 defaultModel/keys 后无需重启            |
| 鉴权           | AUTH_PASSWORD 生效在 /v1/       | 未授权返回 401，UI 仍可访问                  |
| 错误处理       | 状态码清晰、日志清楚            | 非法输入 400、无 key 500、转发失败 502       |
| 部署可用性     | 直接在 Deno Deploy 运行         | 无需构建，导入 URL 可用                      |

# 验收标准

**通过标准**：在不超过2轮迭代后，代码能成功部署到Deno Deploy并正常使用。

**关键考察点**：
- 代码能否跑通
- 引入KV后的并发处理是否正确
- 数据一致性
- 错误处理

**常见失败原因**：
- Deno KV并发竞态问题（读写未加锁/事务）
- 密钥轮询索引更新错误
- 单文件模式下前后端集成失败

# 评判标准

1. **功能完整性 (40%)**：所有端点正常工作，KV 持久化有效
2. **代码质量 (25%)**：结构清晰，错误处理完善
3. **并发稳定性 (25%)**：限流正确，无竞态问题
4. **部署可用性 (10%)**：单文件可直接部署
